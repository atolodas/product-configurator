jQuery(function(a){function b(){a(".wizard .content").animate({height:a(".body.current").outerHeight()},"slow")}if("undefined"!=typeof wpc_config_page){var c=(a("#wpc_sheepItForm").sheepIt({separator:"",allowRemoveLast:!0,allowRemoveCurrent:!0,allowRemoveAll:!1,allowAdd:!0,allowAddN:!0,maxFormsCount:0,minFormsCount:0,iniFormsCount:1,data:inject_data}),a("#wpc_sheepItForm1").sheepIt({separator:"",allowRemoveLast:!0,allowRemoveCurrent:!0,allowRemoveAll:!1,allowAdd:!0,allowAddN:!0,maxFormsCount:0,minFormsCount:0,iniFormsCount:1,data:inject_data_texture}),a("#wpc_sheepItForm2").sheepIt({separator:"",allowRemoveLast:!0,allowRemoveCurrent:!0,allowRemoveAll:!1,allowAdd:!0,allowAddN:!0,maxFormsCount:0,minFormsCount:0,iniFormsCount:1,data:inject_data_size}),null);a("body").on("click",".wpc_texture_upload",function(b){b.preventDefault();var d=a(this);c=wp.media({multiple:!1}),c.on("select",function(){a(d).prev().val(c.state().get("selection").toJSON()[0].url)}),c.open()}),a("#wpc_google_fonts").chosen({disable_search_threshold:10})}if("undefined"!=typeof wpc_attribute_page){var c=null;a("#btn_wpc_attribute_image_upload").click(function(b){c=wp.media({multiple:!1}),c.on("select",function(){a("#hd_wpc_attribute_image").val(c.state().get("selection").toJSON()[0].url),c=null}),c.open(),b.preventDefault()}),a("#hd_wpc_attribute_type").on("change",function(){var b=a(this).find("option:selected"),c=b.attr("data-value");"wpc_none"==c?a(".wpc-hidden").hide():(a(".wpc-hidden").hide(),a("."+c).show())})}a(".wpc_multiselect_chosen").chosen(),"undefined"!=typeof wpc_product_page&&(a("#_wpc_check").is(":checked")?(a(".wpc_default_config_options").removeClass("show_if_wpc_panel"),a(".wpc_instructions_options").removeClass("show_if_wpc_panel")):(a(".wpc_default_config_options").addClass("show_if_wpc_panel"),a(".wpc_instructions_options").addClass("show_if_wpc_panel")),a("body").on("change","#_wpc_check",function(){a(this).is(":checked")?(a(".wpc_default_config_options").removeClass("show_if_wpc_panel"),a(".wpc_instructions_options").removeClass("show_if_wpc_panel")):(a("#wpc_data_default_configuration").is(":visible")&&a("#wpc_data_default_configuration").hide(),a("#wpc_instructions_tab").is(":visible")&&a("#wpc_instructions_tab").hide(),a(".wpc_default_config_options").addClass("show_if_wpc_panel"),a(".wpc_instructions_options").addClass("show_if_wpc_panel"))}),a(".wpc_multiselect").select2(),a("body").on("click","#wpc_refresh_button",function(b){b.preventDefault();var c=window.location.toString();c=c.replace("post-new.php?","post.php?post="+woocommerce_admin_meta_boxes.post_id+"&action=edit&"),a("#wpc_data_default_configuration").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),a("#wpc_data_default_configuration_panel").load(c+" #wpc_data_default_configuration_panel",function(){a(".wpc_multiselect").select2(),a("#wpc_data_default_configuration").unblock()})}),a("body").on("click","#wpc_refresh_instructions_button",function(b){b.preventDefault();var c=window.location.toString();c=c.replace("post-new.php?","post.php?post="+woocommerce_admin_meta_boxes.post_id+"&action=edit&"),a("#wpc_instructions_tab").block({message:null,overlayCSS:{background:"#fff url("+woocommerce_admin_meta_boxes.plugin_url+"/assets/images/ajax-loader.gif) no-repeat center",opacity:.6}}),a("#wpc_instructions_tab").load(c+" #wpc_instructions_tab",function(){a("#wpc_instructions_tab").unblock()})})),a("body").on("click",".background-upload",function(b){b.preventDefault();var d=this;c=wp.media({multiple:!1}),c.on("select",function(){a(a(d).prev()).val(c.state().get("selection").toJSON()[0].url),c=null}),c.open()}),a("body").on("click",".shadow-upload",function(b){b.preventDefault();var d=this;c=wp.media({multiple:!1}),c.on("select",function(){a(a(d).prev()).val(c.state().get("selection").toJSON()[0].url),c=null}),c.open()}),a("#step_image_form").on("submit",function(b){b.preventDefault();var c={action:"wpc_save_configuration_form",formData:a(this).serialize(),postId:a(this).data("id")};a.post(ajaxurl,c,function(a){})}),a("#step_texture_form").on("submit",function(b){b.preventDefault();var c={action:"wpc_save_configuration_form_texture",formData:a(this).serialize(),postId:a(this).data("id")};a.post(ajaxurl,c,function(a){})}),a("#step_color_form").on("submit",function(b){b.preventDefault();var c={action:"wpc_save_configuration_form_color",formDataColor:a(this).serialize(),postId:a(this).data("id")};a.post(ajaxurl,c,function(a){})});var d=function(b,c,d,f,g,i){var j=new Image;j.src=b,e("#wpc_hidden_saddle_design",b),a(j).on("load",function(){new fabric.Image.fromURL(b,function(b){b.set({top:i,left:g,scale:c,scaleX:d,scaleY:f,lockRotation:!0}),h.add(b).renderAll(),a("#saddle_design_upload_btn").attr("disabled","disabled")})})},e=function(b,c){a(b).val(c)},f=function(b){var c=1,d=1,f=new Image;f.src=b,e("#wpc_hidden_base_design",b),a(f).on("load",function(){var e=f.width,g=f.height,i=h.getWidth(),j=h.getHeight();c=i<e?(i/e).toFixed(2):1,d=j<g?(j/g).toFixed(2):1,new fabric.Image.fromURL(b,function(b){b.set({top:0,left:0,scaleX:c,scaleY:d,lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0}),h.add(b).renderAll(),a("#base_design_upload_btn").attr("disabled","disabled"),a("#saddle_design_upload_btn").removeAttr("disabled")})})};if("undefined"!=typeof wpc_base_design_page){var g=a("#wpc_base_design_stage").children("canvas").get(0),h=new fabric.Canvas(g,{selection:!1,hoverCursor:"pointer",rotationCursor:"default",centeredScaling:!0}),i=a("#wpc_base_design_stage").width();h.setHeight(400),h.setWidth(i);var c=null;if(a("#base_design_upload_btn").click(function(a){c=wp.media({multiple:!1}),c.on("select",function(){f(c.state().get("selection").toJSON()[0].url),c=null}),c.open(),a.preventDefault()}),a("#saddle_design_upload_btn").click(function(b){c=wp.media({multiple:!1}),c.on("select",function(){d(c.state().get("selection").toJSON()[0].url,1,1,1,0,0),a("#saddle_scale").val(1),a("#saddle_scaleX").val(1),a("#saddle_scaleY").val(1),c=null}),c.open(),b.preventDefault()}),a("#design_clear").on("click",function(b){b.preventDefault(),h.clear(),a(".wpc_hidden").val(""),a("#saddle_design_upload_btn").attr("disabled","disabled"),a("#base_design_upload_btn").removeAttr("disabled")}),h.on({"object:scaling":function(a){var b=Number(a.target.scale).toFixed(2),c=Number(a.target.scaleX).toFixed(2),d=Number(a.target.scaleY).toFixed(2);e("#saddle_scale",b),e("#saddle_scaleX",c),e("#saddle_scaleY",d)},"object:moving":function(a){var b=Math.round(a.target.left),c=Math.round(a.target.top);e("#saddle_pos_x",b),e("#saddle_pos_y",c)}}),1==edit_mode){var j=a("#wpc_hidden_base_design").val(),k=a("#wpc_hidden_saddle_design").val(),l=parseFloat(a("#saddle_scale").val()),m=parseFloat(a("#saddle_scaleX").val()),n=parseFloat(a("#saddle_scaleY").val()),o=parseInt(a("#saddle_pos_x").val()),p=parseInt(a("#saddle_pos_y").val());f(j),setTimeout(function(){d(k,l,m,n,o,p)},500)}}if("undefined"!=typeof embroidery_config){a("#sheepItForm").sheepIt({separator:'<div style="width:100%; border-top:1px solid #ccc; margin: 10px 0px;"></div>',data:position_data});a("#step_embroidery_form").on("submit",function(b){b.preventDefault();var c={action:"wpc_save_configuration_form_embroidery",formData:a(this).serialize(),postId:a(this).data("id"),termId:termId};a.post(ajaxurl,c,function(a){alert("Data Saved")})})}a("body").on("click",".wpc_selectAllButton",function(b){b.preventDefault();var c=a(this).parent().parent().parent().find(".color_checkbox:checked").length>0;c?a(this).parent().parent().parent().find(".color_checkbox").removeAttr("checked"):a(this).parent().parent().parent().find(".color_checkbox").prop("checked","checked")}),a(document).on("change",".wpc_selection",function(b){var c=a(this);return""!==c.val()&&(c.parent().parent().parent().find(".color_checkbox").removeAttr("checked"),"none"!=c.val()&&("all"==c.val()?(c.parent().parent().parent().find(".color_checkbox").prop("checked","checked"),!1):void a.each(c.parent().parent().parent().find(".color_checkbox"),function(b,d){var e=a(d).data("manu");a.inArray(parseInt(c.val()),e)>=0&&a(d).prop("checked","checked")})))});var q=function(c){var d="wpc_load_tab_data",e=null,f=["wpc_colors","wpc_textures"];e=f[c],a("#"+e).block({message:null,overlayCSS:{background:"#eee",opacity:.6}});var g={action:d,section:e,postId:postId,termId:termId,taxonomy:taxonomy};a.ajax({type:"POST",url:ajaxurl,data:g,dataType:"html",success:function(c){a("#"+e).html(c),a("#wpc_multicolor_cords_select").multiselect({}),b(),a("#"+e).unblock()}})},r=function(b,c){var d="wpc_save_tab_data",e=["wpc_base_edge","wpc_cord_images","wpc_colors","wpc_textures","wpc_multicolor_images"];"undefined"!=typeof c&&(e=["wpc_colors","wpc_textures"]);var f=a("#"+e[b]+"_form"),g={action:d,formData:a(f).serialize(),section:e[b],postId:postId,termId:termId,taxonomy:taxonomy};return a.ajax({type:"POST",url:ajaxurl,data:g,success:function(){alert("Data Saved!!!")},async:!1})};a(document).on("click","#wpc_btn_save_layers",function(a){a.preventDefault(),s("wpc_all_layers","save_all_layers","wpc_data_default_configuration")}),a(document).on("click","#wpc_btn_save_cords",function(a){a.preventDefault(),s("wpc_all_cords","save_all_cords","wpc_data_default_configuration")}),a(document).on("click","#wpc_btn_save_others",function(a){a.preventDefault(),s("wpc_others_options","save_all_others","wpc_data_default_configuration")});var s=function(b,c,d){var e="wpc_save_tab_data",f={action:e,formData:a("#"+b).find("input, select, textarea").serialize(),section:c,postId:woocommerce_admin_meta_boxes.post_id};a("#"+d).block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),a.post(ajaxurl,f,function(b){var c=window.location.toString();c=c.replace("post-new.php?","post.php?post="+woocommerce_admin_meta_boxes.post_id+"&action=edit&"),a("#"+d+"_panel").load(c+" #"+d+"_panel",function(){a(".wpc_multiselect").select2(),a("#"+d).unblock()})})};"undefined"!=typeof wpc_image_page&&a("#wpc_all_images").steps({headerTag:"h3",bodyTag:"section",transitionEffect:"slide",titleTemplate:"#title#",labels:wpc_image_labels,stepsOrientation:"vertical",onStepChanging:function(a,b,c){return c>b&&r(b),!0},onStepChanged:function(a,c,d){t(c),b()},onFinished:function(a,b){r(b)}}),"undefined"!=typeof wpc_only_color&&a("#wpc_all_images").steps({headerTag:"h3",bodyTag:"section",transitionEffect:"slide",titleTemplate:"#title#",labels:wpc_image_labels,stepsOrientation:"vertical",onInit:function(a,b){q(b)},onStepChanging:function(a,b,c){return c>b&&r(b,!0),!0},onStepChanged:function(a,c,d){q(c),b()},onFinished:function(a,b){r(b,!0)}});var t=function(c){var d="wpc_load_tab_data",e=null,f=["wpc_base_edge","wpc_cord_images","wpc_colors","wpc_textures","wpc_multicolor_images"];if(e=f[c],"wpc_base_edge"!=e&&"wpc_cord_layers"!=e){a("#"+e).block({message:null,overlayCSS:{background:"#eee",opacity:.6}});var g={action:d,section:e,postId:postId,termId:termId,taxonomy:taxonomy};a.ajax({type:"POST",url:ajaxurl,data:g,dataType:"html",success:function(c){a("#"+e).html(c),a("#wpc_multicolor_cords_select").multiselect({}),b(),a(c).filter("#wpc_cord_images_form").length>0?u("wpc_combinations"):a(c).filter("#wpc_multicolor_images_form").length>0&&v("wpc_texture_combinations"),a("#"+e).unblock()}})}},u=function(c){var d=a("#"+c+"_data").val();d=a.parseJSON(d);a("#"+c).sheepIt({separator:'<div style="width:100%; border-top:1px solid #ccc; margin: 10px 0px;"></div>',minFormsCount:0,iniFormsCount:0,maxFormsCount:0,allowRemoveLast:!1,allowRemoveAll:!0,afterAdd:function(a,c){b()},afterFill:function(){},data:d});b()},v=function(c){var d=a("#"+c+"_data").val();d=a.parseJSON(d);a("#"+c).sheepIt({separator:'<div style="width:100%; border-top:1px solid #ccc; margin: 10px 0px;"></div>',minFormsCount:0,iniFormsCount:0,maxFormsCount:0,allowRemoveLast:!1,allowRemoveAll:!0,afterAdd:function(a,c){b()},afterFill:function(){},data:d});b()};a(document).on("click",".wpc_image_upload",function(b){b.preventDefault();var d=a(this),e=a("#"+d.data("field"));c=wp.media({multiple:!1}),c.on("select",function(){e.val(c.state().get("selection").toJSON()[0].url)}),c.open()}),a(document).on("click",".wpc_image_upload_sheepit",function(b){b.preventDefault();var d=a(this),e=d.prev();c=wp.media({multiple:!1}),c.on("select",function(){e.val(c.state().get("selection").toJSON()[0].url)}),c.open()}),a(document).on("click",".wpc_upload_button",function(b){b.preventDefault();var d=a(this);c=wp.media({multiple:!1}),c.on("select",function(){a(d).prev().val(c.state().get("selection").toJSON()[0].url)}),c.open()}),a(document).on("click","#wpc_model_copy_color",function(c){c.preventDefault();var d=a(this).data("term"),e=a(a(this).data("select")).val();if(""!==e){a("#wpc_colors_form").block({message:null,overlayCSS:{background:"#eee",opacity:.6}});var f={action:"copy_coor_or_texture",postId:postId,termId:d,modeltocopy:e,type:"color"};a.post(ajaxurl,f,function(c){a("#wpc_colors_form").unblock(),alert("Data Copied!!!"),t(2),b()})}}),a(document).on("click","#wpc_model_copy_texture",function(c){c.preventDefault();var d=a(this).data("term"),e=a(a(this).data("select")).val();if(""!==e){a("#wpc_textures_form").block({message:null,overlayCSS:{background:"#eee",opacity:.6}});var f={action:"copy_coor_or_texture",postId:postId,termId:d,modeltocopy:e,type:"texture"};a.post(ajaxurl,f,function(c){a("#wpc_textures_form").unblock(),alert("Data Copied!!!"),t(3),b()})}}),a(document).on("click","#wpc_model_copy_emb",function(b){b.preventDefault();var c=a(this).data("term"),d=a(a(this).data("select")).val(),e=a(this).data("postid");if(""!==d){a("#step_embroidery_form").block({message:null,overlayCSS:{background:"#eee",opacity:.6}});var f={action:"copy_coor_or_texture",postId:e,termId:c,modeltocopy:d,type:"embroidery"};a.post(ajaxurl,f,function(a){location.reload(!0)})}})});
//# sourceMappingURL=wpc_admin_script.min.js.map